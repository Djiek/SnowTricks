{% extends 'base.html.twig' %}

{% block title %}Hello FigureController!{% endblock %}

{% block body %}

 <section id="spaceShowFigure">
   </section>
   
<section id="showFigure">
<img src= "{{ asset('images/snowboard-extreme-sports.jpeg') }}" alt="supprimer"/>
         <div class="hero-container" data-aos="fade-up">
                {% if app.user %} 
                        <a href="{{ path('Figure_edit', {'id': figure.id}) }}">
                        <img src="{{ asset('images/crayon.png') }}" alt="modifier"/></a> 
                    <form  method="post" action ="{{ path('figure_deleted', {'id': figure.id}) }}" > 
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ figure.id)}}"> 
                        <a  onClick="return confirm('Voulez-vous vraiment supprimer ce post ?')"><img src="{{ asset('images/poubelle.jpg') }}" alt="supprimer" />
                        </a> 
                    </form> 
                {% endif %} 
           <div class="section-title" data-aos="fade-in" data-aos-delay="100"> <h2> {{ figure.name }}</h2> </div>
    </div>
 
  </section>

<br/> 
 <p> Catégorie : {{ figure.tricksGroup.name }}</p> 
    <p>  Crée le :   {{ figure.createdAt | date('d/m/Y') }} à {{figure.createdAt | date('H.i')}}<br/></p>
             {% if figure.updatedAt  %}
                 <p> Mis à jour le :  {{ figure.updatedAt | date('d/m/Y') }} à {{figure.updatedAt | date('H.i')}}<br/></p>
             {% endif %} 
        {{ figure.description }}<br/>
<br/>

{% if app.user %}
{{ form_start(commentForm)}}
{{ form_row(commentForm.content)}}
<button type="submit" class="btn btn-success">Valider</button>
{{ form_end(commentForm)}}
{% else %}
<h2> Pour ajouter un commentaire, connectez vous </h2>
<a href="{{path('security_login')}}" class="btn btn-primary">Connexion</a>
{% endif %}

<section id="commentaires">
<h1> Commentaires : </h1>
        {% for comments in figure.comment %}
                <div class="comment">
                        <div class="row">
                                <div class="col-3">
                                        {{comments.user}} (<small>{{comments.createdAt | date('d/m/y')}} à {{comments.createdAt | date('H.i')}} )</small>
                                </div>
                                <div class="col">
                                        {{comments.content | raw}}
                                </div>
                        </div> 
                </div>
        {% endfor %}
</section>


manque : la photo de l’auteur du message ;
message :  du plus récent au plus ancien : ??? a verifier
Ces messages doivent être paginés (10 par pages).

</p>
{% endblock %}
